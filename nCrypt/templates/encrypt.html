<!doctype html>
<html lang="en" data-theme="system" data-animate="true" data-snap="true" data-sync-scrollbar="true">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>nCrypt</title>

  <!-- Selector styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			const iterationsInput = document.getElementById('iterations');
			const copyButton = document.getElementById('copy-button');
			const ciphertextArea = document.getElementById('ciphertext');
			
			// Iterations validation (your existing code)
			if (iterationsInput) {
				iterationsInput.addEventListener('blur', function(e) {
					let value = parseFloat(e.target.value);
					
					if (isNaN(value) || value < 1) {
						e.target.value = 1;
					} else {
						e.target.value = Math.floor(value);
					}
				});
			}
			
			// Copy to clipboard functionality
			if (copyButton) {
				copyButton.addEventListener('click', function() {
					if (ciphertextArea.value.trim() === '') {
						return; // Don't copy if empty
					}
					
					ciphertextArea.select();
					ciphertextArea.setSelectionRange(0, 99999); // For mobile devices
					
					navigator.clipboard.writeText(ciphertextArea.value).then(function() {
						// Show success feedback
						const originalText = copyButton.textContent;
						copyButton.textContent = 'COPIED!';
						copyButton.style.background = 'linear-gradient(135deg, rgba(100, 255, 100, 0.3), rgba(100, 255, 100, 0.2))';
						copyButton.style.borderColor = '#64ff64';
						copyButton.style.color = '#64ff64';
						
						// Reset after 2 seconds
						setTimeout(() => {
							copyButton.textContent = originalText;
							copyButton.style.background = '';
							copyButton.style.borderColor = '';
							copyButton.style.color = '';
						}, 2000);
					}).catch(function() {
						// Fallback for older browsers
						try {
							document.execCommand('copy');
							alert('Copied to clipboard!');
						} catch (err) {
							alert('Could not copy to clipboard');
						}
					});
				});
			}
		});
	</script>
	<div class="logo-wrapper">
		<img
		src="{{ url_for('static', filename='nCrypt-logo.png') }}"
		alt="nCrypt logo"
		width="360"
		height="auto"
		loading="lazy"
		>
	</div>
	<br>
	<div class="tech-nav">
		<span class="tech-link tech-active">Encrypt</span>
		<span class="tech-divider">|</span>
		<a href="{{ url_for('decrypt') }}" class="tech-link">Decrypt</a>
	</div>
	{% if status_message %}
	<div class="status-message status-{{ status_type }}">
		{{ status_message }}
	</div>
	{% endif %}
	<form method="POST" action="{{ url_for('encrypt') }}">
		<div class="form-container">
			<div class="input-row">
				<div class="input-group">
					<label for="passphrase">Passphrase</label>
					<input type="password" id="passphrase" name="passphrase" placeholder="Enter encryption passphrase">
				</div>
				<div class="input-group">
					<label for="iterations">n(umber of Encryption Iterations)</label>
					<input type="number" id="iterations" name="iterations" value="1000" min="1" step="1" placeholder="1000">
				</div>
			</div>
			<br>
			<div class="input-group">
				<label for="plaintext">Text to Encrypt</label>
				<textarea id="plaintext" name="plaintext" rows="8" placeholder="Enter text to encrypt..."></textarea>
			</div>
			<div class="button-container">
				<button type="submit" id="encrypt-button" class="button">ENCRYPT</button>
			</div>
			<br>
			<div class="input-group">
				<label for="ciphertext">Encrypted Output</label>
				<textarea id="ciphertext" name="ciphertext" rows="8" placeholder="Encrypted text will appear here..." readonly>{{ ciphertext or '' }}</textarea>
			</div>
			<div class="button-container">
				<button type="button" id="copy-button" class="button" {% if not ciphertext %}disabled{% endif %}>COPY OUTPUT</button>
			</div>
		</div>
	</form>
</body>